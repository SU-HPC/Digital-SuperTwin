<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Digital-SuperTwin: &lt;strong&gt;Digital SuperTwin&lt;/strong&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Digital-SuperTwin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><b>Digital SuperTwin</b> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>SuperTwin creates a structured data representation over an HPC system, <b>manages data input from a collection of tools and enable reasonings</b> among them. Current capabilities of SuperTwin are;</p><ul>
<li>Monitoring</li>
<li>Automated PMU configuration</li>
<li>Automated profiling</li>
<li>Modelling </li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
- Knowledge retrieval</h1>
<h1><a class="anchor" id="autotoc_md2"></a>
Overview</h1>
<p>SuperTwin creates a Digital Twin Description **(DTD)** of a target system. It could be used to model, monitor and/or observe both a remote system or local system. However, since large amounts of data are sampled and visualized during the process best use case is to model a remote system. <br  />
 Since SuperTwin leverages a large collection of tools; it has a large dependency list. Installation of these dependencies are left to the user. <br  />
</p>
<hr  />
 <hr  />
<h1><a class="anchor" id="autotoc_md4"></a>
## Requirements</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
On remote host</h2>
<ul>
<li>Performance Co-Pilot (PCP)<ul>
<li>pmdas<ul>
<li>perfevent pmda</li>
<li>proc pmda</li>
<li>linux pmda</li>
<li>lmsensors pmda <br  />
 <em>This pmdas are not required to be installed but their metrics are main interest of SuperTwin</em> <br  />
 <em>PCP components other than pmcd, pmproxy and pmdas could be disabled. They will be automatically disabled in the upcoming versions</em></li>
</ul>
</li>
</ul>
</li>
<li>perf</li>
<li>likwid</li>
<li>lshw</li>
<li>libpfm4</li>
<li>cpuid</li>
<li>pciutils </li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
- ethtool</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
On local host</h2>
<ul>
<li>InfluxDB 1.8</li>
<li>MongoDB</li>
<li>Grafana 9+<ul>
<li>Plugins<ul>
<li><a href="https://grafana.com/grafana/plugins/simpod-json-datasource/">JSON</a></li>
<li><a href="https://grafana.com/grafana/plugins/simpod-json-datasource/">Node Graph API</a></li>
<li><a href="https://grafana.com/grafana/plugins/ae3e-plotly-panel/">Plotly panel</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a href="https://packages.debian.org/sid/utils/pcp-export-pcp2influxdb">pcp-export-pcp2influxdb</a></p><ul>
<li>Python 3.7+ <br  />
</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
Directory Structure</h1>
<pre class="fragment">.
├── ...
├── SuperTwin                     
│   ├── supertwin.py             # Entry point of the framework, SuperTwin class
│   ├── utils.py                 # Common functions used by all modules
│   ├── env.txt                  # Configuration for 3rd party tools
|   ├── monitor_metrics.txt      # Metrics to continuosly monitor
|   ├── probing
|       ├── remote_probe.py      # Copy probing code to remote, execute, get results 
|       ├── detect_utils.py      # Common functions used by probing modules
|       ├── system_query         # Probe hardware and topology info
|           ├── system.py
|           ├── parse_lshw.py
|           ├── parse_showevtinfo.py
|           ├── parse_likwid_topology.py
|           ├── parse_cpuid.py
|           ├── probe.py         # Entry point for probing framework
|       ├── pmu_event_query
|       ├── benchmarks
|           ├── stream_benchmark.py # Execute and parse stream benchmark
|           ├── hpcg_benchmark.py   # Execute and parse hpcg benchmark
|           ├── carm_benchmark.py   # Execute and parse cache aware roofline model benchmark
|               ├── STREAM       # STREAM benchmark
|               ├── HPCG         # HPCG benchmark
|               ├── CARM         # Cache aware roofline model benchmark
|        ├── twin_description  
|            ├── generate_twin.py # Generate DTD from probed info
|        ├── dashboards
|            ├── roofline_dashboard.py # Generate roofline and show in dashboard
|            ├── monitoring_dashboard.py # Generate monitoring dashboard
|            ├── observation_standard.py # Generate "observation" dashboard
|        ├── sampling
|            ├── sampling.py # Configure and start metric shipment events
|        ├── observation
|            ├── observation.py # Configure, start and record observations
|            ├── influx_help.py # Overlap observations that take place in time temporally
└── ...
</pre> <hr  />
 <h1><a class="anchor" id="autotoc_md9"></a>
Usage with CLI</h1>
<p>After invoking the <code><a class="el" href="supertwin_8py.html">supertwin.py</a></code> metadata, generated digital twin descriptions and dashboards are registered to mongodb database named <em>hostname</em>, under collection <em>twin</em>. Observations, with their generated dashboards could be found under <em>observations</em>. Excepted output for invoking <code><a class="el" href="supertwin_8py.html">supertwin.py</a></code> is as following </p><div class="fragment"><div class="line">&gt; sudo python3 supertwin.py</div>
<div class="line">Address of the remote system: 10.36.54.195</div>
<div class="line">Creating a new digital twin with id: 53063c15-5daa-4919-a682-f0d3a97fdbb9</div>
<div class="line">User: ftasyaran</div>
<div class="line">Password: ******</div>
<div class="line">Remote host name: dolap</div>
<div class="line">Executing command on dolap : sudo rm -r /tmp/dt_probing</div>
<div class="line">Executing command on dolap : mkdir /tmp/dt_probing</div>
<div class="line">Copying probing framework to remote system..</div>
<div class="line">Executing command on dolap : sudo rm -r /tmp/dt_probing/*</div>
<div class="line">Probing framework is copied to remote system..</div>
<div class="line">Executing command on dolap : sudo rm /tmp/dt_probing/pmu_event_query/out.txt</div>
<div class="line">Executing command on dolap : sudo rm /tmp/dt_probing/pmu_event_query/out_emp.txt</div>
<div class="line">Executing command on dolap : make -C /tmp/dt_probing/pmu_event_query</div>
<div class="line">Executing command on dolap : sudo /tmp/dt_probing/pmu_event_query/./showevtinfo -L -D &amp;&gt;&gt; /tmp/dt_probing/pmu_event_query/out.txt</div>
<div class="line">Executing command on dolap : sudo /tmp/dt_probing/pmu_event_query/./showevtinfo &amp;&gt;&gt; /tmp/dt_probing/pmu_event_query/out_emp.txt</div>
<div class="line">Executing command on dolap : sudo python3 /tmp/dt_probing/system_query/probe.py</div>
<div class="line">Remote probing is done..</div>
<div class="line">pcp2influxdb configuration: pcp_dolap_monitor.conf generated</div>
<div class="line">A daemon with pid: 2277498 is started monitoring dolap</div>
<div class="line">Using database &#39;dolap_main&#39; and tags &#39;tag=_monitor&#39;.</div>
<div class="line">Sending 35 metrics to InfluxDB at http://127.0.0.1:8086 every 1.0 sec...</div>
<div class="line">(Ctrl-C to stop)</div>
<div class="line">Collection id: 634939b2562da7d3f0b47fc9</div>
<div class="line">STREAM Benchmark thread set: [1, 2, 4, 8, 16, 22, 32, 44, 64, 88]</div>
<div class="line">STREAM benchmark script generated..</div>
<div class="line">path: /home/fatih/dt_latest5/Digital-SuperTwin/SuperTwin</div>
<div class="line">path: /home/fatih/dt_latest5/Digital-SuperTwin/SuperTwin/probing/benchmarks/STREAM</div>
<div class="line">Executing command on dolap : sudo rm -r /tmp/dt_probing/benchmarks/*</div>
<div class="line">Executing command on dolap : mkdir /tmp/dt_probing/benchmarks/STREAM/STREAM_res/</div>
<div class="line">Executing command on dolap : sh /tmp/dt_probing/benchmarks/STREAM/gen_bench.sh</div>
<div class="line">STREAM benchmark result added to Digital Twin</div>
<div class="line">HPCG Benchmark thread set: [1, 2, 4, 8, 16, 22, 32, 44, 64, 88]</div>
<div class="line">HPCG benchmark script, with params nx: 104 ny: 104 nz: 104 time: 60 is generated..</div>
<div class="line">Executing command on dolap : sh /tmp/dt_probing/benchmarks/hpcg/bin/gen_bench.sh</div>
<div class="line">STREAM benchmark result added to Digital Twin</div>
<div class="line">CARM config generated..</div>
<div class="line">CARM Benchmark thread set: [1, 2, 4, 8, 16, 22, 32, 44, 64, 88]</div>
<div class="line">CARM benchmark script generated..</div>
<div class="line">CARM benchmark result added to Digital Twin</div>
<div class="line">Roofline dashboard added to Digital Twin</div>
<div class="line">Twin state is registered to db..</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md10"></a>
Usage with web application</h1>
<div class="fragment"><div class="line">&gt; cd web-app/front-end</div>
<div class="line">&gt; npm install</div>
<div class="line">&gt; npm start</div>
<div class="line">&gt; cd web-app/backend</div>
<div class="line">&gt; python3 backend.py</div>
</div><!-- fragment --><p> Web application is available at localhost:3000</p>
<p>&lt;mark&gt;Warning: This software is under development and may not produce same results on every host&lt;/mark&gt; </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 5 2024 23:54:12 for Digital-SuperTwin by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
